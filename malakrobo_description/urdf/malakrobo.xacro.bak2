<?xml version="1.0" ?>
<robot name="malakrobo" xmlns:xacro="http://www.ros.org/wiki/xacro">
<xacro:include filename="$(find malakrobo_description)/urdf/materials.xacro" />
<xacro:include filename="$(find malakrobo_description)/urdf/malakrobo.gazebo" />
<link name="base_link">
  <visual>
    <origin rpy="0 0 0" xyz="0 0 0.1"/>
    <geometry>
      <cylinder radius="0.2" length="0.02"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="0 0 0" xyz="0 0 0.1"/>
    <geometry>
      <cylinder radius="0.2" length="0.02"/>
    </geometry>
  </collision>
  <inertial>
    <mass value="75"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
  </inertial>
</link>

<link name="base2">
  <visual>
    <origin rpy="0 0 0" xyz="0 0 0.1"/>
    <geometry>
      <box size="0.1 0.4 0.02"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="0 0 0" xyz="0 0 0.1"/>
    <geometry>
      <box size="0.1 0.4 0.02"/>
    </geometry>
  </collision>
  <inertial>
    <mass value="75"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
  </inertial>
</link>

<link name="left_wheel">
  <visual>
    <origin rpy="1.57 0 0" xyz="0 0 0"/>
    <geometry>
      <cylinder radius="0.1" length="0.05"/> 
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="1.57 0 0" xyz="0 0 0"/>
    <geometry>
      <cylinder radius="0.1" length="0.05"/> 
    </geometry>
  </collision>
  <inertial>
    <mass value="0.5"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
  </inertial>
</link>

<link name="right_wheel">
  <visual>
    <origin rpy="1.57 0 0" xyz="0 0 0"/>
    <geometry>
      <cylinder radius="0.1" length="0.05"/> 
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="1.57 0 0" xyz="0 0 0"/>
    <geometry>
      <cylinder radius="0.1" length="0.05"/> 
    </geometry>
  </collision>
  <inertial>
    <mass value="0.5"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
  </inertial>
</link>

<link name="balance_wheel_mount_back">
  <visual>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <geometry>
      <box size="0.05 0.05 0.08"/> 
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <geometry>
      <box size="0.05 0.05 0.08"/> 
    </geometry>
  </collision>
  <inertial>
    <mass value="0.5"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
  </inertial>
</link>

<link name="balance_wheel_mount_front">
  <visual>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <geometry>
      <box size="0.05 0.05 0.08"/> 
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <geometry>
      <box size="0.05 0.05 0.08"/> 
    </geometry>
  </collision>
  <inertial>
    <mass value="0.5"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
  </inertial>
</link>

<link name="balance_ball_front">
  <visual>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <geometry>
      <sphere radius="0.025"/> 
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <geometry>
      <sphere radius="0.025"/> 
    </geometry>
  </collision>
  <inertial>
    <mass value="0.5"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <inertia ixx="0.001" ixy="0.0" ixz="0.0"
               iyy="0.001" iyz="0.0"
               izz="0.001" />
  </inertial>
</link>

<link name="balance_ball_back">
  <visual>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <geometry>
      <sphere radius="0.025"/> 
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <geometry>
      <sphere radius="0.025"/> 
    </geometry>
  </collision>
  <inertial>
    <mass value="0.5"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <inertia ixx="0.001" ixy="0.0" ixz="0.0"
               iyy="0.001" iyz="0.0"
               izz="0.001" />
  </inertial>
</link>


<joint name="base_joint" type="fixed">
  <origin rpy="0 0 0" xyz="0 0 0"/>
  <parent link="base_link"/>
  <child link="base2"/>
  <axis xyz="0.0 1.0 0.0"/>
</joint>

<joint name="base_balance_back" type="fixed">
  <origin rpy="0 0 0" xyz="0.15 0 0.05"/>
  <parent link="base2"/>
  <child link="balance_wheel_mount_back"/>
  <axis xyz="0.0 1.0 0.0"/>
</joint>

<joint name="base_balance_front" type="fixed">
  <origin rpy="0 0 0" xyz="-0.15 0 0.05"/>
  <parent link="base2"/>
  <child link="balance_wheel_mount_front"/>
  <axis xyz="0.0 1.0 0.0"/>
</joint>

<joint name="balance_ball_front" type="continuous">
  <origin rpy="0 0 0" xyz="0 0 -0.03"/>
  <parent link="balance_wheel_mount_front"/>
  <child link="balance_ball_front"/>
  <axis xyz="0.0 1.0 0.0"/>
</joint>

<joint name="balance_ball_back" type="continuous">
  <origin rpy="0 0 0" xyz="0 0 -0.03"/>
  <parent link="balance_wheel_mount_back"/>
  <child link="balance_ball_back"/>
  <axis xyz="0.0 1.0 0.0"/>
</joint>


<joint name="base_to_left_wheel" type="continuous">
  <origin rpy="0 0 0" xyz="0 -0.225 0.1"/>
  <parent link="base2"/>
  <child link="left_wheel"/>
  <axis xyz="0.0 1.0 0.0"/>
</joint>

<joint name="base_to_right_wheel" type="continuous">
  <origin rpy="0 0 0" xyz="0 0.225 0.1"/>
  <parent link="base2"/>
  <child link="right_wheel"/>
  <axis xyz="0.0 1.0 0.0"/>
</joint>

<transmission name="tran1">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="base_to_left_wheel">
    <hardwareInterface>EffortJointInterface</hardwareInterface>
  </joint>
  <actuator name="left_wheel">
    <hardwareInterface>EffortJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>

<transmission name="tran2">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="base_to_right_wheel">
    <hardwareInterface>EffortJointInterface</hardwareInterface>
  </joint>
  <actuator name="right_wheel">
    <hardwareInterface>EffortJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>
</robot>
